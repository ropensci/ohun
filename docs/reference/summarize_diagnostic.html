<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarize detection diagnostics — summarize_diagnostic • ohun</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Summarize detection diagnostics — summarize_diagnostic" />
<meta property="og:description" content="summarize_diagnostic summarizes detection diagnostics" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ohun</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ohun.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maRce10/ohun/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarize detection diagnostics</h1>
    <small class="dont-index">Source: <a href='https://github.com/maRce10/ohun/blob/master/R/summarize_diagnostic.R'><code>R/summarize_diagnostic.R</code></a></small>
    <div class="hidden name"><code>summarize_diagnostic.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>summarize_diagnostic</code> summarizes detection diagnostics</p>
    </div>

    <pre class="usage"><span class='fu'>summarize_diagnostic</span><span class='op'>(</span><span class='va'>diagnostic</span>, time.diagnostics <span class='op'>=</span> <span class='cn'>FALSE</span>, macro.average <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>diagnostic</th>
      <td><p>A data frame with the output of a detection optimization function (<code><a href='diagnose_detection.html'>diagnose_detection</a></code>, <code><a href='optimize_energy_detector.html'>optimize_energy_detector</a></code> or <code><a href='optimize_template_detector.html'>optimize_template_detector</a></code>)</p></td>
    </tr>
    <tr>
      <th>time.diagnostics</th>
      <td><p>Logical argument to control if diagnostics related to the duration of the sound events ("mean.duration.true.positives", "mean.duration.false.positives", "mean.duration.false.negatives" and "proportional.duration.true.positives") are returned (if <code>TRUE</code>). Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>macro.average</th>
      <td><p>Logical argument to control if diagnostics are first calculated for each sound file and then averaged across sound files, which can minimize the effect of unbalanced sample sizes between sound files. If <code>FALSE</code> (default) diagnostics are based on aggregated statistics irrespective of sound files. The following indices can be estimated by macro-averaging: overlap, mean.duration.true.positives, mean.duration.false.positives, mean.duration.false.positives, mean.duration.false.negatives, proportional.duration.true.positives, recall and precision (f.score is always derived from recall and precision). Note that when applying macro-averaging, recall and precision are not derived from the true positive, false positive and false negative values returned by the function.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame, similar to the output of a detection optimization function (<code><a href='diagnose_detection.html'>diagnose_detection</a></code>, <code><a href='optimize_energy_detector.html'>optimize_energy_detector</a></code>, <code><a href='optimize_template_detector.html'>optimize_template_detector</a></code>) including the following detection performance diagnostics:</p><ul>
<li><p><code>detections</code>: total number of detections</p></li>
<li><p><code>true.positives</code>: number of sound events in 'reference' that correspond to any detection. Matching is defined as some degree of overlap in time. In a perfect detection routine it should be equal to the number of rows in 'reference'.</p></li>
<li><p><code>false.positives</code>: number of detections that don't match (i.e. don't overlap with) any of the sound events in 'reference'. In a perfect detection routine it should be 0.</p></li>
<li><p><code>false.negatives</code>: number of sound events in 'reference' that were not detected (not found in 'detection'. In a perfect detection routine it should be 0.</p></li>
<li><p><code>splits</code>: number of detections overlapping reference sounds that also overlap with other detections. In a perfect detection routine it should be 0.</p></li>
<li><p><code>merges</code>: number of detections that overlap with two or more reference sounds. In a perfect detection routine it should be 0.</p></li>
<li><p><code>mean.duration.true.positives</code>: mean duration of true positives (in s). Only included when <code>time.diagnostics = TRUE</code>.</p></li>
<li><p><code>mean.duration.false.positives</code>: mean duration of false positives (in ms). Only included when <code>time.diagnostics = TRUE</code>.</p></li>
<li><p><code>mean.duration.false.negatives</code>: mean duration of false negatives (in ms). Only included when <code>time.diagnostics = TRUE</code>.</p></li>
<li><p><code>overlap</code>: ratio of the time overlap of true positives in 'detection' with its corresponding reference sound event to the duration of the reference sound event.</p></li>
<li><p><code>proportional.duration.true.positives</code>: ratio of duration of true positives to the duration of sound events in 'reference'. In a perfect detection routine it should be 1. Based only on true positives that were not split or merged.</p></li>
<li><p><code>duty.cycle</code>: proportion of a sound file in which sounds were detected. Only included when <code>time.diagnostics = TRUE</code> and <code>path</code> is supplied. Useful when conducting energy-based detection as a perfect detection can be obtained with a very low amplitude threshold, which will detect everything, but will produce a duty cycle close to 1.</p></li>
<li><p><code>recall</code>: Proportion of sound events in 'reference' that were detected. In a perfect detection routine it should be 1.</p></li>
<li><p><code>precision</code>: Proportion of detections that correspond to sound events in 'reference'. In a perfect detection routine it should be 1.</p></li>
<li><p><code>f.score</code>: Combines recall and precision as the harmonic mean of these two. Provides a single value for evaluating performance. In a perfect detection routine it should be 1.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function summarizes a detection diagnostic data frame in which diagnostic parameters are shown split by (typically) a categorical column, usually sound files. This function is used internally by <code><a href='diagnose_detection.html'>diagnose_detection</a></code>. 'splits' and 'merge.positives' are also counted (i.e. counted twice) as 'true.positives'. Therefore "true.positives + false.positives = detections".</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Araya-Salas, M., Smith-Vidaurre, G., Chaverri, G., Brenes, J. C., Chirino, F., Elizondo-Calvo, J., &amp; Rico-Guevara, A. 2022. ohun: an R package for diagnosing and optimizing automatic sound event detection. BioRxiv, 2022.12.13.520253.
Mesaros, A., Heittola, T., &amp; Virtanen, T. (2016). Metrics for polyphonic sound event detection. Applied Sciences, 6(6), 162.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='diagnose_detection.html'>diagnose_detection</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Marcelo Araya-Salas <a href='mailto:marcelo.araya@ucr.ac.cr'>marcelo.araya@ucr.ac.cr</a>)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='op'>{</span>
  <span class='co'># load example selection tables</span>

  <span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"lbh_reference"</span><span class='op'>)</span>

  <span class='co'># run diagnose_detection() by sound file</span>
  <span class='va'>diag</span> <span class='op'>&lt;-</span> <span class='fu'><a href='diagnose_detection.html'>diagnose_detection</a></span><span class='op'>(</span>
    reference <span class='op'>=</span> <span class='va'>lbh_reference</span>,
    detection <span class='op'>=</span> <span class='va'>lbh_reference</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span>, <span class='op'>]</span>, by.sound.file <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>

  <span class='co'># summarize</span>
  <span class='fu'>summarize_diagnostic</span><span class='op'>(</span>diagnostic <span class='op'>=</span> <span class='va'>diag</span><span class='op'>)</span>

  <span class='co'># should be the same as this:</span>
  <span class='fu'><a href='diagnose_detection.html'>diagnose_detection</a></span><span class='op'>(</span>
    reference <span class='op'>=</span> <span class='va'>lbh_reference</span>,
    detection <span class='op'>=</span> <span class='va'>lbh_reference</span><span class='op'>[</span><span class='op'>-</span><span class='fl'>1</span>, <span class='op'>]</span>, by.sound.file <span class='op'>=</span> <span class='cn'>FALSE</span>
  <span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt;   detections true.positives false.positives false.negatives splits merges
#&gt; 1         18             18               0               1      0      0
#&gt;   overlap    recall precision  f.score
#&gt; 1       1 0.9473684         1 0.972973</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marcelo Araya-Salas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


